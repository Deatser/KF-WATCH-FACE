<!DOCTYPE html>
<html lang="ru">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>KF WATCH FACE - Магазин эксклюзивных циферблатов</title>

		<!-- Фавиконка -->
		<link rel="icon" href="/guide/Logo.png" type="image/png" sizes="32x32" />

		<!-- Стили -->
		<link rel="stylesheet" href="../css/style.css" />
		<link
			rel="stylesheet"
			href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
		/>
		<link
			href="https://fonts.googleapis.com/css2?family=Comfortaa:wght@300;400;500;600;700&display=swap"
			rel="stylesheet"
		/>

		<!-- Firebase SDK -->
		<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
		<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
		<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
	</head>
	<body>
		<!-- Общий фон для хедера и новинок -->
		<div class="hero-background">
			<!-- Хедер с навигацией -->
			<header class="header purchase-header">
				<div class="container">
					<a href="/" class="logo">
						<i class="fas fa-clock"></i>
						<span>KF WATCH FACE</span>
					</a>
					<nav class="nav">
						<!-- Ссылка для админов (скрыта по умолчанию) -->
						<a
							href="/admin"
							class="nav-link admin-link"
							id="adminPanelLink"
							style="display: none"
						>
							<i class="fas fa-crown"></i> АДМИН ПАНЕЛЬ
						</a>
						<!-- Новые ссылки: Контакты и FAQ -->
						<a href="#" class="nav-link" id="contactsLink">Контакты</a>
						<a href="#" class="nav-link" id="faqLink">FAQ</a>
						<!-- Измененный порядок ссылок -->
						<a href="#" class="nav-link" id="installGuideLink"
							>Инструкция по установке</a
						>
						<a href="#catalog" class="nav-link">Каталог</a>
						<a href="#" class="nav-link" id="aboutLink">О нас</a>
						<a href="https://t.me/krek_free" target="_blank" class="nav-link">
							<i class="fab fa-telegram"></i>
						</a>

						<!-- Иконка рабочего кабинета -->
						<div class="user-menu-container">
							<button id="userMenuBtn" class="nav-link user-menu-btn">
								<i class="fas fa-user-circle"></i>
							</button>
							<div id="userMenu" class="user-menu">
								<div id="userInfo" style="display: none">
									<p
										id="userEmailDisplay"
										style="margin-bottom: 10px; font-weight: 500"
									></p>
									<button id="logoutBtn" class="btn-logout">Выйти</button>
								</div>
								<div id="authForm">
									<h3 style="margin-bottom: 15px; font-size: 1.1rem">
										Вход / Регистрация
									</h3>
									<div id="authError" class="auth-error"></div>
									<input
										type="email"
										id="authEmail"
										placeholder="Email"
										class="auth-input"
									/>
									<input
										type="password"
										id="authPassword"
										placeholder="Пароль"
										class="auth-input"
									/>
									<div class="auth-buttons">
										<button id="loginBtn" class="auth-btn btn-login">
											Войти
										</button>
										<button id="registerBtn" class="auth-btn btn-register">
											Регистрация
										</button>
									</div>
								</div>
							</div>
						</div>
					</nav>
				</div>
			</header>

			<!-- Блок с новинкой -->
			<section class="new-arrival">
				<div class="container">
					<div class="new-product">
						<div class="new-product-content">
							<span class="new-badge">НОВИНКА</span>
							<h1 class="new-product-title"></h1>
							<p class="new-product-description"></p>

							<div class="new-product-visual">
								<!-- Карусель для новинки -->
								<div class="new-product-carousel">
									<div class="carousel-container" id="newProductCarousel">
										<!-- Фотографии будут добавляться через JS -->
									</div>

									<!-- Навигация карусели -->
									<div class="carousel-controls">
										<button class="carousel-btn prev-btn">
											<i class="fas fa-chevron-left"></i>
										</button>

										<!-- Точки навигации -->
										<div class="carousel-dots" id="newProductDots">
											<!-- Точки будут добавляться через JS -->
										</div>

										<button class="carousel-btn next-btn">
											<i class="fas fa-chevron-right"></i>
										</button>
									</div>
								</div>

								<div class="new-product-details">
									<div class="new-product-price">
										<span class="price">150 ₽</span>
										<span class="price-old">190 ₽</span>
									</div>
									<a href="/purchase/1" class="btn btn-primary">
										<i class="fas fa-shopping-bag"></i>
										Купить сейчас
									</a>
									<div class="new-product-stats">
										<div class="stat">
											<i class="fas fa-gem"></i>
											<span>Сапфировое стекло</span>
										</div>
										<div class="stat">
											<i class="fas fa-bolt"></i>
											<span>Сверхъяркая люминесценция</span>
										</div>
										<div class="stat">
											<i class="fas fa-award"></i>
											<span>Ручная гравировка</span>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</section>
		</div>

		<!-- Основной каталог -->
		<main class="catalog" id="catalog">
			<div class="catalog-container">
				<h2 class="section-title">Коллекция циферблатов</h2>
				<p class="section-subtitle">
					Эксклюзивные дизайны для истинных ценителей часового искусства
				</p>

				<!-- Контейнер для товаров -->
				<div class="products-container" id="productsContainer">
					<!-- Товары будут добавляться через JS -->
				</div>

				<!-- Индикатор загрузки (теперь всегда скрыт) -->
				<div class="loading" id="loadingIndicator" style="display: none">
					<div class="spinner"></div>
					<p>Загружаем больше товаров...</p>
				</div>
			</div>
		</main>

		<!-- Футер -->
		<footer class="footer">
			<div class="container">
				<div class="footer-content">
					<div class="footer-section logo-section">
						<div class="logo-container">
							<img
								src="/guide/Logo.png"
								alt="KF WATCH FACE Logo"
								class="footer-logo"
								width="85"
								height="110"
							/>
							<h3>KF WATCH FACE</h3>
						</div>
					</div>
					<div class="footer-section">
						<h4>Навигация</h4>
						<div class="footer-links">
							<a href="#" class="footer-link" id="installGuideLinkFooter"
								>Инструкция по установке</a
							>
							<a href="#catalog" class="footer-link">Каталог</a>
							<a href="#" class="footer-link" id="aboutLinkFooter">О нас</a>
							<a href="#" class="footer-link" id="faqLinkFooter">FAQ</a>
							<a href="#" class="footer-link" id="contactsLinkFooter"
								>Контакты</a
							>
						</div>
					</div>
					<div class="footer-section">
						<h4>Связаться с продавцом</h4>
						<div class="social-links">
							<a
								href="https://t.me/krek_free"
								target="_blank"
								class="social-link"
								><i class="fab fa-telegram"></i
							></a>
							<!-- Для ПК (скрывается на мобильных) -->
							<a
								href="https://mail.google.com/mail/?view=cm&to=lavrov_dima@mail.ru"
								class="social-link email-link email-desktop"
								target="_blank"
								rel="noopener noreferrer"
							>
								<i class="fas fa-envelope"></i>
							</a>

							<!-- Для мобильных (скрывается на ПК) -->
							<a
								href="mailto:lavrov_dima@mail.ru"
								class="social-link email-link email-mobile"
							>
								<i class="fas fa-envelope"></i>
							</a>
						</div>
					</div>
				</div>
				<p class="copyright">© 2026 KF WATCH FACE. Все права защищены.</p>
			</div>
		</footer>

		<script>
			console.log('Начало загрузки модальных окон...')

			// Синхронная загрузка модальных окон
			const xhr = new XMLHttpRequest()
			xhr.open('GET', '/html/modals.html', false) // false = синхронный запрос
			xhr.send()

			if (xhr.status === 200) {
				const modalHTML = xhr.responseText
				document.body.insertAdjacentHTML('beforeend', modalHTML)
				console.log('Модальные окна вставлены в DOM')

				// Проверяем что они есть
				const modal = document.getElementById('contactsModal')
				console.log('Проверка contactsModal:', modal ? 'НАЙДЕН' : 'НЕ НАЙДЕН')
			} else {
				console.error('Ошибка загрузки modals.html, статус:', xhr.status)
			}
		</script>

		<!-- Подключаем JS файлы -->
		<script src="../js/firebase-config.js"></script>
		<script src="../js/auth.js"></script>
		<script src="../js/main.js" type="module"></script>
	</body>
</html>
