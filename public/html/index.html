<!doctype html>
<html lang="ru">
	<head>
		<!-- Google tag (gtag.js) -->
		<script
			async
			src="https://www.googletagmanager.com/gtag/js?id=G-XRGPB3BKMK"
		></script>
		<script>
			window.dataLayer = window.dataLayer || []
			function gtag() {
				dataLayer.push(arguments)
			}
			gtag('js', new Date())

			gtag('config', 'G-XRGPB3BKMK')
		</script>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>KF WATCH FACE - Магазин эксклюзивных циферблатов</title>

		<!-- Фавиконка -->
		<link rel="icon" href="/guide/Logo.png" type="image/png" sizes="32x32" />

		<!-- Стили -->
		<link rel="stylesheet" href="../css/style.css" />
		<link
			rel="stylesheet"
			href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
		/>
		<link
			href="https://fonts.googleapis.com/css2?family=Comfortaa:wght@300;400;500;600;700&display=swap"
			rel="stylesheet"
		/>

		<!-- Firebase SDK -->
		<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
		<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
		<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>

		<style>
			/* Добавляем стили для цен в каталоге */
			.product-price-container {
				display: flex;
				align-items: center;
				gap: 8px;
				margin: 10px 0;
			}

			.product-price {
				font-size: 1.5rem;
				font-weight: 700;
				color: #8b7355;
			}

			.product-price-old {
				font-size: 1.2rem;
				color: #999;
				text-decoration: line-through;
			}

			.product-discount {
				background: linear-gradient(135deg, #ff6b6b, #ff8e8e);
				color: white;
				padding: 2px 6px;
				border-radius: 12px;
				font-size: 0.9rem;
				font-weight: 600;
			}

			/* Стили для меню пользователя на главной странице */
			.header .user-menu-container {
				position: relative;
			}

			.header .user-menu-btn {
				background: none;
				border: none;
				cursor: pointer;
				font-size: 1.2rem;
				color: #4a4a4a;
				padding: 5px;
				transition: color 0.3s ease;
			}

			.header .user-menu-btn:hover {
				color: #8b7355;
			}

			.header .user-menu {
				position: absolute;
				top: 100%;
				right: 0;
				background: white;
				border-radius: 12px;
				box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
				padding: 20px;
				min-width: 280px;
				z-index: 1000;
				display: none;
				margin-top: 10px;
				animation: fadeIn 0.3s ease;
			}

			.header .user-menu.show {
				display: block;
			}

			.header .auth-error {
				color: #ff6b6b;
				font-size: 0.85rem;
				margin-bottom: 15px;
				padding: 8px 12px;
				background: rgba(255, 107, 107, 0.1);
				border-radius: 6px;
				display: none;
			}

			.header .auth-error.show {
				display: block;
			}

			.header .auth-input {
				width: 100%;
				padding: 12px 15px;
				margin-bottom: 12px;
				border: 1px solid #e0e0e0;
				border-radius: 8px;
				font-family: 'Comfortaa', cursive;
				font-size: 0.9rem;
				transition: border-color 0.3s ease;
			}

			.header .auth-input:focus {
				outline: none;
				border-color: #8b7355;
			}

			.header .auth-buttons {
				display: flex;
				gap: 10px;
				margin-top: 10px;
			}

			.header .auth-btn {
				flex: 1;
				padding: 12px;
				border: none;
				border-radius: 8px;
				font-family: 'Comfortaa', cursive;
				font-size: 0.9rem;
				font-weight: 600;
				cursor: pointer;
				transition: all 0.3s ease;
			}

			.header .btn-login {
				background: linear-gradient(135deg, #8b7355 0%, #a89176 100%);
				color: white;
			}

			.header .btn-register {
				background: #f5f5f5;
				color: #4a4a4a;
			}

			.header .btn-login:hover {
				transform: translateY(-2px);
				box-shadow: 0 6px 15px rgba(139, 115, 85, 0.3);
			}

			.header .btn-register:hover {
				background: #e8e8e8;
				transform: translateY(-2px);
			}

			.header .btn-logout {
				width: 100%;
				padding: 10px;
				background: #f5f5f5;
				border: none;
				border-radius: 8px;
				font-family: 'Comfortaa', cursive;
				font-size: 0.9rem;
				font-weight: 500;
				cursor: pointer;
				transition: all 0.3s ease;
			}

			.header .btn-logout:hover {
				background: #e8e8e8;
				transform: translateY(-2px);
			}

			/* Адаптация для мобильных */
			@media (max-width: 1100px) {
				.nav {
					display: flex;
					align-items: center;
					gap: 15px;
				}

				/* Скрываем обычные ссылки навигации */
				.nav > a:not(.logo):not(.user-menu-btn) {
					display: none;
				}

				/* Логотип слева */
				.logo {
					order: 1;
					margin-right: auto;
				}

				/* Иконка пользователя - второй элемент */
				.user-menu-container {
					display: flex !important;
					align-items: center;
					margin-left: 0;
					order: 2;
				}

				/* Бургер-кнопка - третий элемент (самый правый) */
				.burger-menu-btn {
					display: flex;
					align-items: center;
					justify-content: center;
					order: 3;
					margin-left: 10px;
					margin-right: 0;
				}

				.header .container {
					display: flex;
					justify-content: space-between;
					align-items: center;
					gap: 10px;
				}
			}

			@media (max-width: 768px) {
				.user-menu-btn {
					font-size: 1.1rem;
					padding: 6px;
				}

				.burger-menu-btn {
					margin-left: 10px;
					margin-right: 0;
				}
			}

			@media (max-width: 576px) {
				.user-menu-btn {
					font-size: 1rem;
					padding: 5px;
				}

				.header .container {
					gap: 8px;
					padding: 10px 15px;
				}

				.burger-menu-btn {
					margin-left: 8px;
					margin-right: 0;
				}
			}

			/* Стили для статистики предложения дня - ИСПРАВЛЕННЫЕ */
			/* На компьютерах: 4 блока друг под другом (4 ряда по 1) */
			.daily-offer-stats .stats-grid {
				display: flex;
				flex-direction: column;
				gap: 15px;
				width: 100%;
			}

			.daily-offer-stats .stat {
				display: flex;
				align-items: center;
				gap: 15px;
				padding: 16px 20px;
				background: rgba(248, 242, 233, 0.7);
				border-radius: 12px;
				transition: all 0.2s ease;
				width: 100%;
				box-sizing: border-box;
			}

			.daily-offer-stats .stat:hover {
				background: rgba(248, 242, 233, 0.9);
				transform: translateX(5px);
			}

			.daily-offer-stats .stat i {
				color: #8b7355;
				font-size: 1.3rem;
				width: 30px;
				text-align: center;
				flex-shrink: 0;
			}

			.daily-offer-stats .stat span {
				color: #555;
				font-size: 1.1rem;
				font-weight: 500;
				flex-grow: 1;
			}

			/* Для планшетов (768px - 1100px) - 2 колонки, 2 ряда */
			@media (max-width: 1100px) and (min-width: 769px) {
				.daily-offer-stats .stats-grid {
					display: grid;
					grid-template-columns: repeat(2, 1fr);
					gap: 15px;
				}

				.daily-offer-stats .stat {
					flex-direction: column;
					text-align: center;
					padding: 18px 15px;
					gap: 12px;
					min-height: 110px;
					justify-content: center;
				}

				.daily-offer-stats .stat i {
					font-size: 1.4rem;
					width: auto;
					margin-bottom: 5px;
				}

				.daily-offer-stats .stat span {
					font-size: 1rem;
					line-height: 1.3;
				}
			}

			/* Для мобильных телефонов (до 768px) - 2 колонки, 2 ряда */
			@media (max-width: 768px) {
				.daily-offer-stats .stats-grid {
					display: grid;
					grid-template-columns: repeat(2, 1fr);
					gap: 12px;
				}

				.daily-offer-stats .stat {
					flex-direction: column;
					text-align: center;
					padding: 16px 12px;
					gap: 10px;
					min-height: 100px;
					justify-content: center;
				}

				.daily-offer-stats .stat i {
					font-size: 1.2rem;
					width: auto;
					margin-bottom: 5px;
				}

				.daily-offer-stats .stat span {
					font-size: 0.95rem;
					line-height: 1.2;
				}
			}
		</style>
	</head>

	<body>
		<!-- Общий фон для хедера и новинок -->
		<div class="hero-background">
			<!-- Хедер с навигацией -->
			<header class="header">
				<div class="container">
					<a href="/" class="logo">
						<i class="fas fa-clock"></i>
						<span>KF WATCH FACE</span>
					</a>

					<nav class="nav">
						<!-- Ссылка для админов (скрыта по умолчанию) -->
						<a
							href="/admin"
							class="nav-link admin-link"
							id="adminPanelLink"
							style="display: none"
						>
							<i class="fas fa-crown"></i> АДМИН ПАНЕЛЬ
						</a>
						<!-- Новые ссылки: Контакты и FAQ -->
						<a href="#" class="nav-link" id="contactsLink">Контакты</a>
						<a href="#" class="nav-link" id="faqLink">FAQ</a>
						<!-- Измененный порядок ссылок -->
						<a href="#" class="nav-link" id="installGuideLink"
							>Инструкция по установке</a
						>
						<a href="#catalog" class="nav-link">Каталог</a>
						<a href="#" class="nav-link" id="aboutLink">О нас</a>
						<a href="https://t.me/krek_free" target="_blank" class="nav-link">
							<i class="fab fa-telegram"></i>
						</a>

						<!-- Иконка рабочего кабинета -->
						<div class="user-menu-container">
							<button id="userMenuBtn" class="nav-link user-menu-btn">
								<i class="fas fa-user-circle"></i>
							</button>
							<div id="userMenu" class="user-menu">
								<!-- НАЧАЛО: Добавлен реальный контент формы входа -->
								<div id="userInfo" style="display: none">
									<p
										id="userEmailDisplay"
										style="margin-bottom: 10px; font-weight: 500"
									></p>
									<button id="logoutBtn" class="btn-logout">Выйти</button>
								</div>
								<div id="authForm">
									<h3 style="margin-bottom: 15px; font-size: 1.1rem">
										Вход / Регистрация
									</h3>
									<div id="authError" class="auth-error"></div>
									<input
										type="email"
										id="authEmail"
										placeholder="Email"
										class="auth-input"
									/>
									<input
										type="password"
										id="authPassword"
										placeholder="Пароль"
										class="auth-input"
									/>
									<div class="auth-buttons">
										<button id="loginBtn" class="auth-btn btn-login">
											Войти
										</button>
										<button id="registerBtn" class="auth-btn btn-register">
											Регистрация
										</button>
									</div>
								</div>
								<!-- КОНЕЦ: Добавлен реальный контент формы входа -->
							</div>
						</div>

						<!-- Бургер-меню для мобильных -->
						<button id="burgerMenuBtn" class="burger-menu-btn">
							<i class="fas fa-bars"></i>
						</button>
					</nav>

					<!-- Бургер-меню как выпадающее (сверху справа) -->
					<div id="burgerDropdown" class="burger-dropdown">
						<div class="burger-links">
							<a href="#" class="burger-link" id="burgerContactsLink">
								<i class="fas fa-address-book"></i>
								Контакты
							</a>
							<a href="#" class="burger-link" id="burgerFaqLink">
								<i class="fas fa-question-circle"></i>
								FAQ
							</a>
							<a href="#" class="burger-link" id="burgerInstallGuideLink">
								<i class="fas fa-download"></i>
								Инструкция по установке
							</a>
							<a href="#catalog" class="burger-link burger-catalog-link">
								<i class="fas fa-th"></i>
								Каталог
							</a>
							<a href="#" class="burger-link" id="burgerAboutLink">
								<i class="fas fa-info-circle"></i>
								О нас
							</a>
							<a
								href="https://t.me/krek_free"
								target="_blank"
								class="burger-link"
							>
								<i class="fab fa-telegram"></i>
								Telegram
							</a>
						</div>
					</div>
				</div>
			</header>

			<!-- Блок с предложением дня -->
			<div class="daily-offer-background">
				<section class="daily-offer">
					<div class="daily-offer-content">
						<!-- Заголовок предложения дня -->
						<!-- Заголовок предложения дня -->
						<div class="daily-offer-header">
							<!-- Десктопная версия -->
							<div class="offer-header-desktop">
								<span class="offer-badge"
									><i class="fas fa-fire"></i> ПРЕДЛОЖЕНИЕ ДНЯ</span
								>
								<div class="offer-timer" id="offerTimer">
									<i class="fas fa-clock"></i>
									<span id="timerHours">24</span>:<span id="timerMinutes"
										>00</span
									>:<span id="timerSeconds">00</span>
									<span class="timer-label">До конца акции</span>
								</div>
							</div>

							<!-- Мобильная версия (скрыта по умолчанию) -->
							<div class="offer-header-mobile">
								<div class="offer-header-mobile-top">
									<span class="offer-badge"
										><i class="fas fa-fire"></i> ПРЕДЛОЖЕНИЕ ДНЯ</span
									>
								</div>
								<div class="offer-timer-mobile" id="offerTimerMobile">
									<div class="timer-display-mobile">
										<i class="fas fa-clock"></i>
										<span id="timerHoursMobile">24</span>:<span
											id="timerMinutesMobile"
											>00</span
										>:<span id="timerSecondsMobile">00</span>
									</div>
									<span class="timer-label-mobile">До конца акции</span>
								</div>
							</div>
						</div>

						<div class="daily-offer-main">
							<!-- Мобильная версия: название, цена и кнопка над фотографией -->
							<div class="mobile-offer-header">
								<h1
									class="daily-offer-watch-name"
									id="mobileDailyOfferWatchName"
								></h1>
								<div class="daily-offer-price">
									<span class="price">120 ₽</span>
									<span class="price-old">150 ₽</span>
									<span class="discount-badge">-20%</span>
								</div>
								<a
									href="#"
									class="btn btn-primary mobile-buy-btn"
									id="mobileDailyOfferBuyButton"
								>
									<i class="fas fa-shopping-bag"></i>
									Купить сейчас
								</a>
							</div>

							<!-- Карусель для предложения дня -->
							<div class="daily-offer-carousel">
								<div class="carousel-container" id="dailyOfferCarousel">
									<!-- Фотографии будут добавляться через JS -->
								</div>

								<!-- Навигация карусели -->
								<div class="carousel-controls">
									<button class="carousel-btn prev-btn">
										<i class="fas fa-chevron-left"></i>
									</button>

									<!-- Точки навигации -->
									<div class="carousel-dots" id="dailyOfferDots">
										<!-- Точки будут добавляться через JS -->
									</div>

									<button class="carousel-btn next-btn">
										<i class="fas fa-chevron-right"></i>
									</button>
								</div>
							</div>

							<!-- Десктопная версия: все детали справа -->
							<div class="daily-offer-details">
								<h1
									class="daily-offer-watch-name desktop-watch-name"
									id="dailyOfferWatchName"
								></h1>
								<div class="daily-offer-price desktop-price">
									<span class="price">120 ₽</span>
									<span class="price-old">150 ₽</span>
									<span class="discount-badge">-20%</span>
								</div>
								<a
									href="#"
									class="btn btn-primary desktop-buy-btn"
									id="dailyOfferBuyButton"
								>
									<i class="fas fa-shopping-bag"></i>
									Купить сейчас
								</a>
								<div class="daily-offer-stats">
									<div class="stats-grid">
										<div class="stat">
											<i class="fas fa-sliders-h"></i>
											<span>Предустановленные ярлыки</span>
										</div>
										<div class="stat">
											<i class="fas fa-palette"></i>
											<span>Изменяемые цвета</span>
										</div>
										<div class="stat">
											<i class="fas fa-heartbeat"></i>
											<span>Мониторинг пульса BPM</span>
										</div>
										<div class="stat">
											<i class="fas fa-microchip"></i>
											<span>WearOS 4+ | AOD | APK файл</span>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</section>
			</div>
		</div>

		<!-- Основной каталог -->
		<main class="catalog" id="catalog">
			<div class="catalog-container">
				<h2 class="section-title">Коллекция циферблатов</h2>
				<p class="section-subtitle">
					Эксклюзивные дизайны для истинных ценителей часового искусства
				</p>

				<!-- Контейнер для товаров -->
				<div class="products-container" id="productsContainer">
					<!-- Товары будут добавляться через JS -->
				</div>

				<!-- Индикатор загрузки (теперь всегда скрыт) -->
				<div class="loading" id="loadingIndicator" style="display: none">
					<div class="spinner"></div>
					<p>Загружаем больше товаров...</p>
				</div>
			</div>
		</main>

		<!-- Футер -->
		<footer class="footer">
			<div class="container">
				<div class="footer-content">
					<div class="footer-section logo-section">
						<div class="logo-container">
							<img
								src="/guide/Logo.png"
								alt="KF WATCH FACE Logo"
								class="footer-logo"
								width="85"
								height="110"
							/>
							<h3>KF WATCH FACE</h3>
						</div>
					</div>
					<div class="footer-section">
						<h4>Навигация</h4>
						<div class="footer-links">
							<a href="#" class="footer-link" id="installGuideLinkFooter"
								>Инструкция по установке</a
							>
							<a href="#catalog" class="footer-link">Каталог</a>
							<a href="#" class="footer-link" id="aboutLinkFooter">О нас</a>
							<a href="#" class="footer-link" id="faqLinkFooter">FAQ</a>
							<a href="#" class="footer-link" id="contactsLinkFooter"
								>Контакты</a
							>
						</div>
					</div>
					<div class="footer-section">
						<h4>Связаться с продавцом</h4>
						<div class="social-links">
							<a
								href="https://t.me/krek_free"
								target="_blank"
								class="social-link"
								><i class="fab fa-telegram"></i
							></a>
							<!-- Для ПК (скрывается на мобильных) -->
							<a
								href="https://mail.google.com/mail/?view=cm&to=lavrov_dima@mail.ru"
								class="social-link email-link email-desktop"
								target="_blank"
								rel="noopener noreferrer"
							>
								<i class="fas fa-envelope"></i>
							</a>

							<!-- Для мобильных (скрывается на ПК) -->
							<a
								href="mailto:lavrov_dima@mail.ru"
								class="social-link email-link email-mobile"
							>
								<i class="fas fa-envelope"></i>
							</a>
						</div>
					</div>
				</div>
				<p class="copyright">© 2026 KF WATCH FACE. Все права защищены.</p>
			</div>
		</footer>

		<!-- Бургер-меню как выпадающее (сверху справа) -->
		<div id="burgerDropdown" class="burger-dropdown">
			<div class="burger-links">
				<a href="#" class="burger-link" id="burgerContactsLink">
					<i class="fas fa-address-book"></i>
					Контакты
				</a>
				<a href="#" class="burger-link" id="burgerFaqLink">
					<i class="fas fa-question-circle"></i>
					FAQ
				</a>
				<a href="#" class="burger-link" id="burgerInstallGuideLink">
					<i class="fas fa-download"></i>
					Инструкция по установке
				</a>
				<a href="#catalog" class="burger-link burger-catalog-link">
					<i class="fas fa-th"></i>
					Каталог
				</a>
				<a href="#" class="burger-link" id="burgerAboutLink">
					<i class="fas fa-info-circle"></i>
					О нас
				</a>
				<a href="https://t.me/krek_free" target="_blank" class="burger-link">
					<i class="fab fa-telegram"></i>
					Telegram
				</a>
			</div>
		</div>

		<script>
			console.log('Начало загрузки модальных окон...')

			// Синхронная загрузка модальных окон
			const xhr = new XMLHttpRequest()
			xhr.open('GET', '/html/modals.html', false) // false = синхронный запрос
			xhr.send()

			if (xhr.status === 200) {
				const modalHTML = xhr.responseText
				document.body.insertAdjacentHTML('beforeend', modalHTML)
				console.log('Модальные окна вставлены в DOM')

				// Проверяем что они есть
				const modal = document.getElementById('contactsModal')
				console.log('Проверка contactsModal:', modal ? 'НАЙДЕН' : 'НЕ НАЙДЕН')
			} else {
				console.error('Ошибка загрузки modals.html, статус:', xhr.status)
			}
		</script>

		<!-- Подключаем JS файлы -->
		<script src="../js/firebase-config.js"></script>
		<script src="../js/auth.js"></script>
		<script src="../js/main.js" type="module"></script>
	</body>
</html>
